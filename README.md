# social_network_system_design

System Design социальной сети для курса по System Design

Функциональные требования:
- Публикация и просмотр постов
- Публикации содержат медифайлы, небольшие описания.
- Публикация  содержит привязку к месту.
- Пользователи могут ставить оценки постам
- Пользователи могут комментировать посты
- Пользователи могут подписываться и отписываться на/от других пользователей
- Рейтинг мест по популярности
- Поиск и просмотр мест
- Формирование и просмотр ленты с постами для пользователя в обратном хронологическом порядке
- Формирование и просмотр ленты  с постами связанными с местом.
- Интеграция с Яндекс Картами для работы с местами.
- Валюта - рубль
Нефункциональные требования:
- DAU 10 000 000
- Надежность 99.99%
- СНГ аудитория
- Есть высокий сезон
- Данные храним всегда
- Активность пользователя:
  - в среднем создает 1 пост в день
  - в среднем 10 раз в день загружает ленту
  - в среднем ставит 7 реакций в день
  - в среднем оставляет 4 комментария в день
- Лимиты
  - 50 постов в день
  - 1к запросов на чтение в день
  - 1к комментариев в день
  - 5к реакций в день
  - 5 медиафайлов в 1 посте
  - размер файла не превышает 100MB
  - Описание не превышает 256 символов.
- Тайминги
  - 5с на загрузку ленты(ленты подписок и   ленты по месту)
  - 4с на запрос публикации поста
  - 1с на запрос создания реакции
  - 2с на запрос создания комментарий
  - 3с на запрос поиска места
Расчет нагрзки:
- RPS write (посты) = 10 000 000 * 1 / 86 400 = 120 RPS
- RPS write (реакции) = 10 000 000 * 7 / 86 400 = 810 RPS
- RPS write (комментарии) = 10 000 000 * 4 / 86 400 = 500 RPs
- RPS read (поскольку при загрузке поста, нам необходимо загрузить комментарии и реакции, то считаем вместе) = 10 000 000 * 10 / 86 400 = 1200 RPS

Примерная схемма таблиц:
Посты(id,ссылки на медиа,содержание поста,id автора,created_at,deleted_at) средний размер 
Комментарии(id,id поста, id автора, created_at, содержание,deleted_at)
Реакции(id,тип реакции(пост/комментарий),реакция,created_at,deleted_at)

Трафик запись постов = 120 * 3МБ = 360МБ/с
Трафик на чтение постов = (1200 * 3145728B * 20) +(1200 * 20 * 200B) + (1200 * 20 * 100B)  =  72000 МБ/с
Трафик на запись комментария = 500 * 200B = 10000B/с = 10 KB/c
Трафик на запись реакций = 810 * 100B = 81000B/c = 81KB/C


